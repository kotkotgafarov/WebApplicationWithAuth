<h1>List of emrolles</h1>


<div class="form-row">
  <div class="col">
    <input type="text" [(ngModel)]="filterName" class="form-control" placeholder="Searching for a name" />
  </div>
  <div class="col">
    <button class="btn btn-sm btn-primary" (click)="loadEnrollees()">Filter</button>
  </div>
</div>
<br>

<div class="mat-elevation-z8">
  <table style="width:100%" mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">

    <!-- Id Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Id. </th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Names </th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <!-- address Column -->
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef> Address </th>
      <td mat-cell *matCellDef="let element"> {{element.address}} </td>
    </ng-container>

    <!-- phone Column -->
    <ng-container matColumnDef="phone">
      <th mat-header-cell *matHeaderCellDef> Phone </th>
      <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
    </ng-container>

    <!-- profileStatus Column -->
    <ng-container matColumnDef="profileStatus">
      <th mat-header-cell *matHeaderCellDef> Profile </th>
      <td mat-cell *matCellDef="let element">
        <a [routerLink]="['/profile', element.id]">
          <div *ngIf="element.profileStatus == 0">Draft</div>
          <div *ngIf="element.profileStatus == 1">Review</div>
          <div *ngIf="element.profileStatus == 2">Revise</div>
          <div *ngIf="element.profileStatus == 3">Approve</div>
        </a>
      </td>
    </ng-container>

    <!-- applicationStatus Column -->
    <ng-container matColumnDef="applicationStatus">
      <th mat-header-cell *matHeaderCellDef> Application </th>
      <td mat-cell *matCellDef="let element">
        <a [routerLink]="['/application', element.id]">
          <div *ngIf="element.applicationStatus == 0">Draft</div>
          <div *ngIf="element.applicationStatus == 1">Review</div>
          <div *ngIf="element.applicationStatus == 2">Revise</div>
          <div *ngIf="element.applicationStatus == 3">Approve</div>
        </a>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                 [length]="totalRecords"
                 [pageSize]='5'
                 showFirstLastButtons
                 (page)="handlePageEvent($event)"
                 aria-label="Choose the page">
  </mat-paginator>

</div>


<!--<input type="button" value="Добавить" class="btn btn-primary" (click)="add()" />
<br>
<br>
<table *ngIf="tableMode; else create" class="table table-striped">
  <thead>
    <tr>
      <td>ФИО</td>
      <td>Адрес</td>
      <td>Телефон</td>
      <td></td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of enrollees">
      <ng-template [ngIf]="enrollee?.id != p.id" [ngIfElse]="edit">
        <td>{{p?.name}}</td>
        <td>{{p?.address}}</td>
        <td>{{p?.phone}}</td>
        <td>
          <button class="btn btn-sm btn-primary" (click)="editEnrollee(p)">Изменить</button>
          <button class="btn btn-sm btn-danger" (click)="delete(p)">Удалить</button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>-->
<!--шаблон для редактирования-->
<!--<ng-template #edit>
  <td>
    <input type="text" [(ngModel)]="enrollee.name" class="form-control" />
  </td>
  <td>
    <input type="text" [(ngModel)]="enrollee.address" class="form-control" />
  </td>
  <td>
    <input type="text" [(ngModel)]="enrollee.phone" class="form-control" />
  </td>
  <td>
    <input type="button" value="Сохранить" (click)="save()" class="btn btn-sm btn-success" />
    <input type="button" value="Отмена" (click)="cancel()" class="btn btn-sm btn-warning" />
  </td>
</ng-template>-->
<!--шаблон для добавления-->
<!--<ng-template #create>
  <div class="form-group">
    <label>ФИО</label>
    <input type="text" [(ngModel)]="enrollee.name" class="form-control" />
  </div>
  <div class="form-group">
    <label>Адрес</label>
    <input type="text" [(ngModel)]="enrollee.address" class="form-control" />
  </div>
  <div class="form-group">
    <label>Телефон</label>
    <input type="text" [(ngModel)]="enrollee.phone" class="form-control" />
  </div>
  <div>
    <input type="button" value="Сохранить" (click)="save()" class="btn btn-success" />
    <input type="button" value="Отмена" (click)="cancel()" class="btn btn-warning" />
  </div>
</ng-template>-->
